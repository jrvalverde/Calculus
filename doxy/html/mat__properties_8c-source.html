<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mat_properties.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>mat_properties.c</h1><a href="mat__properties_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/**</span>
00002 <span class="comment"> *  @file mat_properties.c</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> *  @brief  functions to query 2D matrix properties</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> *  When using 2D matrices it is often useful to find about the properties</span>
00007 <span class="comment"> *  of a matrix before performing some operations on it, either to be able</span>
00008 <span class="comment"> *  to select a better algorithm, to avoid problems or for any other reason.</span>
00009 <span class="comment"> *</span>
00010 <span class="comment"> *  The functions in this module allow you to find out if a given matrix</span>
00011 <span class="comment"> *  has the queried characteristic.</span>
00012 <span class="comment"> *</span>
00013 <span class="comment"> *  @note   The results found might be cached in specific fields of the</span>
00014 <span class="comment"> *          matrix structure, with a .dirty field to signal when a given</span>
00015 <span class="comment"> *          operation may have changed the properties of a matrix. The</span>
00016 <span class="comment"> *          general usage of matrices should be investigated to decide if</span>
00017 <span class="comment"> *          this approach is worth the trouble.</span>
00018 <span class="comment"> *</span>
00019 <span class="comment"> *  @pre    portable.h</span>
00020 <span class="comment"> *</span>
00021 <span class="comment"> *  @pre    matrix.h</span>
00022 <span class="comment"> *</span>
00023 <span class="comment"> *  @see    matrix.h for a general introduction to matrices</span>
00024 <span class="comment"> *</span>
00025 <span class="comment"> *  @see    mat_test.c      Is an auxiliary module with</span>
00026 <span class="comment"> *      the test code of these functions used to debug this</span>
00027 <span class="comment"> *      module (last time everything went OK).</span>
00028 <span class="comment"> *</span>
00029 <span class="comment"> *  @author    José Ramón Valverde Carrillo.</span>
00030 <span class="comment"> *</span>
00031 <span class="comment"> *  @version    2.0</span>
00032 <span class="comment"> *</span>
00033 <span class="comment"> *  @date   11 - february - 2004    v2.0</span>
00034 <span class="comment"> *</span>
00035 <span class="comment"> *  @date    1 - october - 1988     Last modification of v1.0</span>
00036 <span class="comment"> *</span>
00037 <span class="comment"> *      COPYRIGHT:</span>
00038 <span class="comment"> *          © YoEgo.    Since I have no cash, I can't</span>
00039 <span class="comment"> *      register this (nor do I believe I should). So</span>
00040 <span class="comment"> *      this module is left in the PUBLIC DOMAIN.</span>
00041 <span class="comment"> *          It is furthermore forbidden its use for</span>
00042 <span class="comment"> *      commercial purposes unless I get a share on</span>
00043 <span class="comment"> *      the profits.</span>
00044 <span class="comment"> *          I say.</span>
00045 <span class="comment"> *                                              YoEgo.</span>
00046 <span class="comment"> *</span>
00047 <span class="comment"> * $Id: mat.c,v 1.1 2004/02/22 21:13:12 jr Exp jr $</span>
00048 <span class="comment"> * $Log: mat.c,v $</span>
00049 <span class="comment"> * Revision 1.1  2004/02/22 21:13:12  jr</span>
00050 <span class="comment"> * Initial revision</span>
00051 <span class="comment"> *</span>
00052 <span class="comment"> */</span>
00053 
00054 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00055 <span class="preprocessor">#include &lt;math.h&gt;</span>
00056 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00057 <span class="preprocessor">#include &lt;bits/nan.h&gt;</span>
00058 
00059 <span class="preprocessor">#include "<a class="code" href="portable_8h.html">portable.h</a>"</span>
00060 <span class="preprocessor">#include "<a class="code" href="matrix_8h.html">matrix.h</a>"</span>
00061 
00062 <span class="comment">/*----------------------------------------------------------------*/</span>
00063 <span class="comment">/*                      MATRIX PROPERTIES                         */</span>
00064 <span class="comment">/*----------------------------------------------------------------*/</span>
00065 <span class="comment"></span>
00066 <span class="comment">/** \defgroup matrix_properties</span>
00067 <span class="comment"> * @{</span>
00068 <span class="comment"> */</span>
00069 <span class="comment"></span>
00070 <span class="comment">/**</span>
00071 <span class="comment"> *  \brief query if a matrix is square</span>
00072 <span class="comment"> *</span>
00073 <span class="comment"> *  Verify if both dimensions of a matrix are the same (i.e. it is square)</span>
00074 <span class="comment"> *</span>
00075 <span class="comment"> *  \param mat the matrix to verify</span>
00076 <span class="comment"> *</span>
00077 <span class="comment"> *  \return TRUE if the matrix is square, false otherwise</span>
00078 <span class="comment"> */</span>
<a name="l00079"></a><a class="code" href="mat__properties_8c.html#a0">00079</a> <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="mat__properties_8c.html#a0">mat_is_square</a>(<a class="code" href="structmatrix.html">matrix</a> mat)
00080 {
00081     <span class="keywordflow">return</span> (mat-&gt;<a class="code" href="structmatrix.html#m0">rows</a> == mat-&gt;<a class="code" href="structmatrix.html#m1">cols</a>);
00082 }
00083 <span class="comment"></span>
00084 <span class="comment">/**</span>
00085 <span class="comment"> * \brief check if a matrix is symmetric </span>
00086 <span class="comment"> *</span>
00087 <span class="comment"> * Check if a matrix is symmetric. A symmetric matric has all its</span>
00088 <span class="comment"> * elements symmetric with respect to the main diagonal (a&lt;sub&gt;ij&lt;/sub&gt;</span>
00089 <span class="comment"> * = a&lt;sub&gt;ji&lt;/sub&gt;): A=A'</span>
00090 <span class="comment"> *</span>
00091 <span class="comment"> * This is useful for handling quadratic forms: Given A&lt;sub&gt;mn&lt;/sub&gt;</span>
00092 <span class="comment"> * and X&lt;sub&gt;n1&lt;/sub&gt; then \f[</span>
00093 <span class="comment">     X^T A X = \sum_{i=1}^n \sum{j=1}^n a_{ij} x{i} x{j}</span>
00094 <span class="comment"> \f]</span>
00095 <span class="comment"> * and conversely, given a quadratic form, it may be converted to matrix</span>
00096 <span class="comment"> * form, but there are many ways to choose a matrix A. One of them is to</span>
00097 <span class="comment"> * select A a symmetric matrix: it is then easier to select its values.</span>
00098 <span class="comment"> *</span>
00099 <span class="comment"> * \param mat the matrix to verify</span>
00100 <span class="comment"> *</span>
<a name="l00101"></a><a class="code" href="mat__properties_8c.html#a1">00101</a> <span class="comment"> * \return TRUE if the matrix is symmetric, FALSE otherwise.</span>
00102 <span class="comment"> */</span>
00103 <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="mat__properties_8c.html#a1">mat_is_symmetric</a>(<a class="code" href="structmatrix.html">matrix</a> mat)
00104 {
00105 <span class="preprocessor">#ifndef MAT_OPTIMIZE</span>
00106 <span class="preprocessor"></span>    <span class="keywordtype">boolean</span> symmetric = <a class="code" href="portable_8h.html#a58">TRUE</a>;
00107     <span class="keywordtype">int</span> i, j;
00108     
00109     <span class="keywordflow">if</span> (mat-&gt;<a class="code" href="structmatrix.html#m0">rows</a> != mat-&gt;<a class="code" href="structmatrix.html#m1">cols</a>)
00110         <span class="comment">/* the matrix must be square to start with */</span>
00111         <span class="keywordflow">return</span> <a class="code" href="portable_8h.html#a59">FALSE</a>;
00112 
00113     <span class="keywordflow">for</span> (i = 1; i &lt;= mat-&gt;<a class="code" href="structmatrix.html#m0">rows</a> - 1; i++)
00114         <span class="keywordflow">for</span> (j = i + 1; j &lt;= mat-&gt;<a class="code" href="structmatrix.html#m1">cols</a>; j++)
00115             <span class="keywordflow">if</span> (mat-&gt;<a class="code" href="structmatrix.html#m2">values</a>[i][j] != mat-&gt;<a class="code" href="structmatrix.html#m2">values</a>[j][i])
00116                 <span class="keywordflow">return</span> <a class="code" href="portable_8h.html#a59">FALSE</a>;
00117 <span class="preprocessor">#else</span>
00118 <span class="preprocessor"></span>    <span class="comment">/* trivial optimizations */</span>
00119     <span class="keywordtype">boolean</span> symmetric = <a class="code" href="portable_8h.html#a58">TRUE</a>;
00120     <span class="keywordtype">int</span> i, j, dim;
00121     <a class="code" href="matrix_8h.html#a5">real</a> **element;
00122     
00123     <span class="keywordflow">if</span> ((dim = mat-&gt;<a class="code" href="structmatrix.html#m0">rows</a>) != mat-&gt;<a class="code" href="structmatrix.html#m1">cols</a>)
00124         <span class="keywordflow">return</span> <a class="code" href="portable_8h.html#a59">FALSE</a>;
00125 
00126     element = mat-&gt;<a class="code" href="structmatrix.html#m2">values</a>;
00127     <span class="keywordflow">for</span> (i = 1; i &lt;= dim; i++)
00128         <span class="keywordflow">for</span> (j = 1; j &lt;= dim; j++)
00129             <span class="keywordflow">if</span> (element[i][j] != element[j][i])
00130                 <span class="keywordflow">return</span> <a class="code" href="portable_8h.html#a59">FALSE</a>;
00131 <span class="preprocessor">#endif</span>
00132 <span class="preprocessor"></span>}
00133 <span class="comment"></span>
00134 <span class="comment">/**</span>
00135 <span class="comment"> * \brief query if this is an identity matrix</span>
00136 <span class="comment"> *</span>
00137 <span class="comment"> *  Return if the matrix is an identity matrix. The matrix must be a</span>
00138 <span class="comment"> * square matrix and have all elements in the main diagonal set to </span>
00139 <span class="comment"> * one, and all off-diagonal elements set to zero.</span>
00140 <span class="comment"> *</span>
00141 <span class="comment"> * An identity matrix of order n, I&lt;sub&gt;nn&lt;/sub&gt; verifies</span>
00142 <span class="comment"> * </span>
00143 <span class="comment"> * A&lt;sub&gt;mn&lt;/sub&gt; I&lt;sub&gt;nn&lt;/sub&gt; = A&lt;sub&gt;mn&lt;/sub&gt;</span>
00144 <span class="comment"> *</span>
00145 <span class="comment"> * I&lt;sub&gt;nn&lt;/sub&gt; B&lt;sub&gt;np&lt;/sub&gt; = B&lt;sub&gt;np&lt;/sub&gt;</span>
00146 <span class="comment"> *</span>
00147 <span class="comment"> * \param mat the matrix to verify</span>
00148 <span class="comment"> * </span>
<a name="l00149"></a><a class="code" href="mat__properties_8c.html#a2">00149</a> <span class="comment"> * \return TRUE if the matrix is an identity matrix.</span>
00150 <span class="comment"> */</span>
00151 <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="mat__properties_8c.html#a2">mat_is_identity</a>(<a class="code" href="structmatrix.html">matrix</a> mat)
00152 {
00153     <span class="keywordtype">int</span> i, j, dim;
00154     
00155     <span class="keywordflow">if</span> ((dim = mat-&gt;<a class="code" href="structmatrix.html#m0">rows</a>) != mat-&gt;<a class="code" href="structmatrix.html#m1">cols</a>)
00156         <span class="keywordflow">return</span> <a class="code" href="portable_8h.html#a59">FALSE</a>;
00157     
00158     <span class="keywordflow">for</span> (i = 1; i &lt;= dim; i++)
00159         <span class="keywordflow">for</span> (j = 1; j &lt;= dim; j++)
00160             <span class="keywordflow">if</span> (i == j) {
00161                 <span class="keywordflow">if</span> (mat-&gt;<a class="code" href="structmatrix.html#m2">values</a>[i][i] != 1.0)
00162                     <span class="keywordflow">return</span> <a class="code" href="portable_8h.html#a59">FALSE</a>;
00163             }
00164             <span class="keywordflow">else</span>
00165                 <span class="keywordflow">if</span> (mat-&gt;<a class="code" href="structmatrix.html#m2">values</a>[i][j] != 0.0)
00166                     <span class="keywordflow">return</span> <a class="code" href="portable_8h.html#a59">FALSE</a>;
00167     <span class="keywordflow">return</span> <a class="code" href="portable_8h.html#a58">TRUE</a>;
00168 }
00169 <span class="comment"></span>
00170 <span class="comment">/**</span>
00171 <span class="comment"> * \brief query if a matrix is null</span>
00172 <span class="comment"> *</span>
00173 <span class="comment"> * Find out if we are dealing with the null matrix. A null matrix has</span>
00174 <span class="comment"> * all of its elements set to zero.</span>
00175 <span class="comment"> *</span>
00176 <span class="comment"> * \param mat the matrix to verify</span>
00177 <span class="comment"> * </span>
<a name="l00178"></a><a class="code" href="mat__properties_8c.html#a3">00178</a> <span class="comment"> * \return TRUE if the matrix is a null matrix.</span>
00179 <span class="comment"> */</span>
00180 <span class="keyword">public</span> <span class="keywordtype">boolean</span> <a class="code" href="mat__properties_8c.html#a3">mat_is_null</a>(<a class="code" href="structmatrix.html">matrix</a> mat) {
00181 <span class="preprocessor">#   ifndef MAT_OPTIMIZE</span>
00182 <span class="preprocessor"></span>    <span class="keywordtype">int</span> i, j;
00183     
00184     <span class="keywordflow">for</span> (i = 1; i &lt;= mat-&gt;<a class="code" href="structmatrix.html#m0">rows</a>; i++)
00185         <span class="keywordflow">for</span> (j = 1; j &lt;= mat-&gt;<a class="code" href="structmatrix.html#m1">cols</a>; j++)
00186             <span class="keywordflow">if</span> (mat-&gt;<a class="code" href="structmatrix.html#m2">values</a>[i][j] != 0.0)
00187                 <span class="keywordflow">return</span> <a class="code" href="portable_8h.html#a59">FALSE</a>;
00188 <span class="preprocessor">#   else</span>
00189 <span class="preprocessor"></span>    <span class="keywordtype">int</span> i, size;
00190     <a class="code" href="matrix_8h.html#a5">real</a> *elem;
00191     
00192     size = mat-&gt;<a class="code" href="structmatrix.html#m0">rows</a> * mat-&gt;<a class="code" href="structmatrix.html#m1">cols</a>;
00193     elem = mat-&gt;<a class="code" href="structmatrix.html#m2">values</a>[i];
00194     <span class="keywordflow">for</span> (i = 1; i &lt;= size; i++)
00195         <span class="keywordflow">if</span> (elem[i] != 0.0)
00196             <span class="keywordflow">return</span> <a class="code" href="portable_8h.html#a59">FALSE</a>;
00197 <span class="preprocessor">#   endif</span>
00198 <span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="portable_8h.html#a58">TRUE</a>;
00199 }
00200 <span class="comment"></span>
00201 <span class="comment">/** @} */</span>
00202 
</pre></div><hr><address style="align: right;"><small>Generated on Fri Mar 5 19:26:48 2004 for MATRIXCALCULUS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
