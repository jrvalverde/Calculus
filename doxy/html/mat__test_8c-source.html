<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>mat_test.c Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.18 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="modules.html">Modules</a> &nbsp; <a class="qindex" href="annotated.html">Data Structures</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Data Fields</a> &nbsp; <a class="qindex" href="globals.html">Globals</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>mat_test.c</h1><a href="mat__test_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment"> * MatTest.c</span>
00003 <span class="comment"> *</span>
00004 <span class="comment"> *      Test matrix routines (by J. R. Valverde, 1988).</span>
00005 <span class="comment"> *</span>
00006 <span class="comment"> *      Compile with 'cc -o matt MatTest.c Mat.c -lm' and</span>
00007 <span class="comment"> *      run 'matt -test_number'. See source for check of validity.</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> *      José Ramón Valverde Carrillo</span>
00010 <span class="comment"> */</span>
00011 
00012 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
00013 <span class="preprocessor">#include &lt;math.h&gt;</span>
00014 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
00015 
00016 <span class="preprocessor">#include "<a class="code" href="portable_8h.html">portable.h</a>"</span>
00017 <span class="preprocessor">#include "<a class="code" href="matrix_8h.html">matrix.h</a>"</span>
00018 
00019 
00020 <a class="code" href="mat__test_8c.html#a1">main</a>(argc, <a class="code" href="mat__test_8c.html#a0">argv</a>)
00021 <span class="keywordtype">int</span> argc;
<a name="l00022"></a><a class="code" href="mat__test_8c.html#a0">00022</a> <span class="keywordtype">char</span> *<a class="code" href="mat__test_8c.html#a0">argv</a>[];
00023   {
00024     <span class="keywordtype">char</span> ch;
00025     <span class="keywordtype">int</span> i, j, k, l, n;
00026     <a class="code" href="matrix_8h.html#a5">real</a>  **a,
00027           **b,
00028           **c;
00029     <a class="code" href="matrix_8h.html#a5">real</a> *bv;
00030     <a class="code" href="structmatrix.html">matrix</a> A, B, C,
00031             AT, BT;
00032     <a class="code" href="matrix_8h.html#a5">real</a> temp;
00033     <span class="keywordtype">int</span> <a class="code" href="portable_8h.html#a78">status</a>;
00034     
00035     printf(<span class="stringliteral">"\n\nStep 1: matrix allocation and access\n------------------------------------\n"</span>);
00036 
00037     <a class="code" href="portable_8h.html#a78">status</a> = <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;A, 3, 3); 
00038     <span class="keywordflow">if</span> (<a class="code" href="portable_8h.html#a78">status</a> != <a class="code" href="portable_8h.html#a65">SUCCESS</a>) {
00039         printf(<span class="stringliteral">"Error: can't allocate A\n"</span>);
00040         exit(1);
00041     }
00042 
00043     <span class="comment">/* direct access to the values list */</span>     
00044     a = A-&gt;<a class="code" href="structmatrix.html#m2">values</a>;
00045     <span class="keywordflow">for</span> (i = 1; i &lt;= 3; i++)
00046       <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00047         {
00048           a[i][j] = 7.77;
00049          }
00050 
00051     <span class="keywordflow">for</span> (i = 1; i &lt;= 3; i++)
00052       <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00053       {
00054         printf(<span class="stringliteral">"% 1.2f\t"</span>, a[i][j]);
00055         
00056       }
00057     printf(<span class="stringliteral">"\n\nThat should have been\n%s\n"</span>,
00058 <span class="stringliteral">"7.77    7.77    7.77    7.77    7.77    7.77    7.77    7.77    7.77\n\n"</span>);
00059     <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(A);
00060     
00061     <span class="comment">/* Access as a unidimensional array */</span>
00062     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;B, 3, 3);
00063     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(B, 0.0);
00064     bv = B-&gt;<a class="code" href="structmatrix.html#m2">values</a>[1];
00065     <span class="keywordflow">for</span> (i = 1; i &lt;= 3; i++) {
00066         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00067             printf(<span class="stringliteral">"% 1.2f\t"</span>, b[i * j]);
00068         printf(<span class="stringliteral">"\n"</span>);
00069     }
00070     printf(<span class="stringliteral">"\n"</span>);
00071     <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(B);
00072 
00073     <span class="comment">/* Access using mat_element() */</span>
00074     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;C, 3, 3);
00075     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(C, 1.1);
00076     <span class="keywordflow">for</span>(i = 1; i &lt;= 3; i++) {
00077         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00078             printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(C, i, j));
00079         printf(<span class="stringliteral">"\n"</span>);
00080     }
00081     printf(<span class="stringliteral">"\n\nMust yield\n%s\n%s\n%s\n\n%s\n%s\n%s\n\n"</span>,
00082 <span class="stringliteral">"0.00   0.00    0.00 "</span>,
00083 <span class="stringliteral">"0.00   0.00    0.00 "</span>,  
00084 <span class="stringliteral">"0.00   0.00    0.00 "</span>,  
00085 
00086 <span class="stringliteral">"1.10    1.10    1.10 "</span>,        
00087 <span class="stringliteral">"1.10    1.10    1.10 "</span>,        
00088 <span class="stringliteral">"1.10    1.10    1.10 "</span>);
00089     <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(C);
00090     
00091     printf(<span class="stringliteral">"\n\nStep 2: initialization\n----------------------\n\n"</span>);
00092         
00093     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;A, 3, 3);
00094     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(A, 1.87);
00095     
00096     <span class="comment">/* using matrix information routines */</span>
00097     <span class="keywordflow">for</span> (i = 1; i &lt;= <a class="code" href="mat__access_8c.html#a0">mat_rows</a>(A); i++) {
00098         <a class="code" href="matrix_8h.html#a5">real</a> *row;
00099         row = <a class="code" href="mat__access_8c.html#a3">mat_row</a>(A, i);
00100         <span class="keywordflow">for</span> (j = 1; j &lt;= <a class="code" href="mat__access_8c.html#a1">mat_cols</a>(A); j++) {
00101             printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(A, i, j));
00102         }
00103         printf(<span class="stringliteral">"\n"</span>);
00104     }
00105     printf(<span class="stringliteral">"\n"</span>);
00106     printf(<span class="stringliteral">"Should have been:\n\</span>
00107 <span class="stringliteral">1.87    1.87    1.87\n\</span>
00108 <span class="stringliteral">1.87    1.87    1.87\n\</span>
00109 <span class="stringliteral">1.87    1.87    1.87\n\n"</span>);
00110 
00111 <span class="comment">/*</span>
00112 <span class="comment">    mat_alloc(&amp;C, 3, 3);</span>
00113 <span class="comment">    mat_fill(c, 1, 3, 1, 2, 1.1);</span>
00114 <span class="comment">*/</span>
00115 
00116     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;A, 3, 3);
00117     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;B, 3, 3);
00118     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(A, 1.1);
00119     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(B, 2.2);
00120     <span class="comment">/* A = B    */</span>
00121     <a class="code" href="mat__ops_8c.html#a0">mat_assign</a>(A, B);
00122      
00123     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;C, 3, 3);
00124     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(C, 1.1);
00125     <span class="comment">/* B = C */</span>
00126     <a class="code" href="mat__ops_8c.html#a0">mat_assign</a>(B, C);
00127     
00128     a = <a class="code" href="mat__access_8c.html#a2">mat_values</a>(A);
00129     b = <a class="code" href="mat__access_8c.html#a2">mat_values</a>(B);
00130     <span class="keywordflow">for</span> (i = 1; i &lt;= 3; i++) {
00131         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00132             printf(<span class="stringliteral">"% 1.2f\t"</span>, a[i][j]);
00133         printf(<span class="stringliteral">"\t"</span>);
00134         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00135             printf(<span class="stringliteral">"% 1.2f\t"</span>, b[i][j]);
00136         printf(<span class="stringliteral">"\n"</span>);
00137     }
00138     printf(<span class="stringliteral">"\n\n\</span>
00139 <span class="stringliteral">        Must give\n\</span>
00140 <span class="stringliteral">2.20    2.20  2.20              1.10    1.10    1.10\n\</span>
00141 <span class="stringliteral">2.20    2.20  2.20              1.10    1.10    1.10\n\</span>
00142 <span class="stringliteral">2.20    2.20  2.20              1.10    1.10    1.10\n\n"</span>);
00143     <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(A);
00144     <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(B);
00145     <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(C);
00146 
00147     printf(<span class="stringliteral">"\n\nStep 3: transpose\n-----------------\n\n"</span>);
00148     
00149     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;A, 3, 3);
00150     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;B, 3, 3);
00151     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(A, 0.0);
00152     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(B, 0.0);
00153 
00154     <span class="comment">/* first assign values to source matrices */</span>
00155     temp = 0.0;
00156     a = <a class="code" href="mat__access_8c.html#a2">mat_values</a>(A);
00157     <span class="keywordflow">for</span> (i = 1; i &lt;= 3; i++)
00158       <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00159         {
00160           a[i][j] = cos(temp);
00161           <a class="code" href="mat__init_8c.html#a0">mat_set</a>(B, i, j, sin(temp));
00162           temp += 0.7;
00163         }
00164         
00165     <span class="comment">/* Show source matrices  */</span>
00166     <span class="keywordflow">for</span> (i = 1; i &lt;= 3; i++)
00167       {
00168         puts(<span class="stringliteral">""</span>);
00169         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00170           printf(<span class="stringliteral">"% 1.2f\t"</span>, a[i][j]); 
00171         printf(<span class="stringliteral">"\t"</span>);
00172         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00173           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(B, i, j));
00174       }
00175     puts(<span class="stringliteral">""</span>);
00176     <span class="comment">/* Transpos'em to AT and BT */</span>
00177     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;AT, 3, 3);
00178     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;BT, 3, 3);
00179     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(AT, 0.0);
00180     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(BT, 0.0);
00181     
00182     <a class="code" href="mat__ops_8c.html#a1">mat_transpose</a>(AT, A);
00183     <a class="code" href="mat__ops_8c.html#a1">mat_transpose</a>(BT, B);
00184     <span class="comment">/* Show transpose matrices  */</span>
00185     <span class="keywordflow">for</span> (i = 1; i &lt;= 3; i++)
00186       {
00187         puts(<span class="stringliteral">""</span>);
00188         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00189           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(AT, i, j)); 
00190         printf(<span class="stringliteral">"\t"</span>);
00191         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00192           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(BT, i, j));
00193       }
00194     puts(<span class="stringliteral">""</span>);
00195 
00196     printf(<span class="stringliteral">"\nShould give\n\</span>
00197 <span class="stringliteral"> 1.00    0.76    0.17              0.00    0.64   0.99 \n\</span>
00198 <span class="stringliteral">-0.50   -0.94   -0.94              0.86    0.33  -0.35\n\</span>
00199 <span class="stringliteral">-0.49    0.19    0.78             -0.87   -0.98  -0.63\n\</span>
00200 <span class="stringliteral">\n\</span>
00201 <span class="stringliteral"> 1.00   -0.50   -0.49              0.00    0.86  -0.87\n\</span>
00202 <span class="stringliteral"> 0.76   -0.94    0.19              0.64    0.33  -0.98\n\</span>
00203 <span class="stringliteral"> 0.17   -0.94    0.78              0.99   -0.35  -0.63\n\n"</span>);
00204     <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(A); <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(AT);
00205     <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(B); <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(BT);
00206 
00207 
00208     printf(<span class="stringliteral">"\n\nStep 4: Identity matrix\n-----------------------\n"</span>);
00209     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;A, 3, 3);
00210     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(A, 7.81);
00211     <a class="code" href="mat__init_8c.html#a2">mat_identity</a>(A);
00212     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;C, 3, 3);
00213     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(C, 1.87);
00214     <a class="code" href="mat__init_8c.html#a2">mat_identity</a>(C);
00215     <span class="comment">/* Show matrices  */</span>
00216     <span class="keywordflow">for</span> (i = 1; i &lt;= 3; i++)
00217       {
00218         puts(<span class="stringliteral">""</span>);
00219         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00220           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(A, i, j)); 
00221         printf(<span class="stringliteral">"\t"</span>);
00222         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00223           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(B, i, j));
00224       }
00225     puts(<span class="stringliteral">""</span>);
00226 
00227     printf(<span class="stringliteral">"\n\nOutput should be\n\</span>
00228 <span class="stringliteral"> 1.00    0.00  0.00              1.00    0.00    0.00\n\</span>
00229 <span class="stringliteral"> 0.00    1.00  0.00              0.00    1.00    0.00\n\</span>
00230 <span class="stringliteral"> 0.00    0.00  1.00              0.00    0.00    1.00\n\n"</span>);
00231     <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(A);
00232     <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(C);
00233 
00234 
00235     printf(<span class="stringliteral">"\n\nStep 5: Arithmetic\n------------------\n"</span>);
00236     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;A, 3, 3);
00237     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;B, 3, 3);
00238     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;C, 3, 3);
00239 
00240     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(A, 1.45);
00241     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(B, 2.47);
00242     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(C, 1.00);
00243 
00244     <a class="code" href="mat__arith_8c.html#a0">mat_sum</a>(C, A, B);
00245     <span class="keywordflow">for</span>(i = 1; i &lt;= 3; i++) {
00246         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00247             printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(C, i, j));
00248         printf(<span class="stringliteral">"\n"</span>);
00249     }
00250     printf(<span class="stringliteral">"\n\nCorrect output is\n\</span>
00251 <span class="stringliteral"> 3.92    3.92    3.92\n\</span>
00252 <span class="stringliteral"> 3.92    3.92    3.92\n\</span>
00253 <span class="stringliteral"> 3.92    3.92    3.92\n\n"</span>);
00254 
00255     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(A, 1.00);
00256     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(B, 2.47);
00257     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(C, 1.45);
00258     <a class="code" href="mat__arith_8c.html#a1">mat_substract</a>(A, B, C);
00259     <span class="keywordflow">for</span>(i = 1; i &lt;= 3; i++) {
00260         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00261             printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(A, i, j));
00262         printf(<span class="stringliteral">"\n"</span>);
00263     }
00264     printf(<span class="stringliteral">"\n\nCorrect output is\n\</span>
00265 <span class="stringliteral"> 1.02    1.02    1.02\n\</span>
00266 <span class="stringliteral"> 1.02    1.02    1.02\n\</span>
00267 <span class="stringliteral"> 1.02    1.02    1.02\n\n"</span>);
00268 
00269 
00270     <span class="comment">/* Verification with a matrix and its inverse:</span>
00271 <span class="comment">    The result should be the identity matrix    */</span>
00272     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(C, 0.0);
00273     
00274     a = <a class="code" href="mat__access_8c.html#a2">mat_values</a>(A);
00275     a[1][1] = 1.0; a[1][2] = 2.0; a[1][3] = 3.0;
00276     a[2][1] = 1.0; a[2][2] = 3.0; a[2][3] = 3.0;
00277     a[3][1] = 1.0; a[3][2] = 2.0; a[3][3] = 4.0;
00278 
00279     b = <a class="code" href="mat__access_8c.html#a2">mat_values</a>(B);
00280     b[1][1] = 6.0;  b[1][2] = -2.0; b[1][3] = -3.0;
00281     b[2][1] = -1.0; b[2][2] = 1.0;  b[2][3] = 0.0;
00282     b[3][1] = -1.0; b[3][2] = 0.0;  b[3][3] = 1.0;
00283     
00284     <a class="code" href="mat__arith_8c.html#a2">mat_multiply</a>(C, A, B);
00285     <span class="comment">/* Show matrices  */</span>
00286     <span class="keywordflow">for</span> (i = 1; i &lt;= 3; i++)
00287       {
00288         puts(<span class="stringliteral">""</span>);
00289         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00290           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(A, i, j)); 
00291         printf(<span class="stringliteral">"\t"</span>);
00292         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00293           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(B, i, j));
00294         printf(<span class="stringliteral">"\t"</span>);
00295         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00296           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(C, i, j));
00297       }
00298     puts(<span class="stringliteral">""</span>);
00299     printf(<span class="stringliteral">"\nThat must have been\n\</span>
00300 <span class="stringliteral"> 1.00    2.00    3.00            6.00   -2.00   -3.00            1.00    0.00   0.00\n\</span>
00301 <span class="stringliteral"> 1.00    3.00    3.00           -1.00    1.00    0.00            0.00    1.00   0.00\n\</span>
00302 <span class="stringliteral"> 1.00    2.00    4.00           -1.00    0.00    1.00            0.00    0.00   1.00\n\n"</span>);
00303     <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(A); <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(B); <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(C);
00304 
00305 
00306 <span class="comment">/*</span>
00307 <span class="comment">    A more general test: A[5][2] x B[2][2] =&gt; C[5][2]</span>
00308 <span class="comment">*/</span>
00309     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;A, 5, 2);
00310     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;B, 2, 2);
00311     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;C, 5, 2);
00312     a = <a class="code" href="mat__access_8c.html#a2">mat_values</a>(A);
00313     a[1][1] = 1.0; a[1][2] = 3.0;
00314     a[2][1] = 4.0; a[2][2] = 2.0;
00315     a[3][1] = 1.0; a[3][2] = 1.0;
00316     a[4][1] = 6.0; a[4][2] = 4.0;
00317     a[5][1] = 3.0; a[5][2] = 2.0;
00318     
00319     b= <a class="code" href="mat__access_8c.html#a2">mat_values</a>(B);
00320     b[1][1] = 1.0; b[1][2] = 2.0;
00321     b[2][1] = 3.0; b[2][2] = 4.0;
00322     
00323     <a class="code" href="mat__arith_8c.html#a2">mat_multiply</a>(C, A, B);
00324     <span class="keywordflow">for</span> (i = 1; i &lt;= 5; i++) 
00325         printf(<span class="stringliteral">"% 2.2f\t% 2.2f\n"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(A, i, 1), <a class="code" href="mat__access_8c.html#a4">mat_element</a>(A, i, 2));
00326     printf(<span class="stringliteral">"\n"</span>);
00327     <span class="keywordflow">for</span> (i = 1; i &lt;= 2; i++) 
00328         printf(<span class="stringliteral">"% 2.2f\t% 2.2f\n"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(B, i, 1), <a class="code" href="mat__access_8c.html#a4">mat_element</a>(B, i, 2));
00329      printf(<span class="stringliteral">"\n"</span>);
00330     <span class="keywordflow">for</span> (i = 1; i &lt;= 5; i++) 
00331         printf(<span class="stringliteral">"% 2.2f\t% 2.2f\n"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(C, i, 1), <a class="code" href="mat__access_8c.html#a4">mat_element</a>(C, i, 2));
00332     printf(<span class="stringliteral">"\n\n"</span>);
00333 
00334     <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(A); <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(B), <a class="code" href="mat__housekeep_8c.html#a1">mat_free</a>(C);
00335     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;A, 3, 3);
00336     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;B, 3, 3);
00337     <a class="code" href="mat__housekeep_8c.html#a0">mat_alloc</a>(&amp;C, 3, 3);
00338     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(A, 1.5);
00339     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(B, 2.0);
00340     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(C, 0.0);
00341     <a class="code" href="mat__arith_8c.html#a2">mat_multiply</a>(C, A, B);
00342     <span class="comment">/* Show matrices  */</span>
00343     <span class="keywordflow">for</span> (i = 1; i &lt;= 3; i++)
00344       {
00345         puts(<span class="stringliteral">""</span>);
00346         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00347           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(A, i, j)); 
00348         printf(<span class="stringliteral">"\t"</span>);
00349         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00350           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(B, i, j));
00351         printf(<span class="stringliteral">"\t"</span>);
00352         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00353           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(C, i, j));
00354       }
00355     puts(<span class="stringliteral">""</span>);
00356     printf(<span class="stringliteral">"\nResults are\n\</span>
00357 <span class="stringliteral"> 1.50    1.50    1.50            2.00    2.00    2.00            9.00    9.00   9.00\n\</span>
00358 <span class="stringliteral"> 1.50    1.50    1.50            2.00    2.00    2.00            9.00    9.00   9.00\n\</span>
00359 <span class="stringliteral"> 1.50    1.50    1.50            2.00    2.00    2.00            9.00    9.00   9.00\n\n"</span>);
00360 
00361 
00362     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(B, 1.5e-2);
00363     <a class="code" href="mat__arith_8c.html#a3">mat_scalar_product</a>(A, B, 3.0);
00364 
00365     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(B, 1.5);
00366     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(C, 0.0);
00367     <a class="code" href="mat__arith_8c.html#a3">mat_scalar_product</a>(C, B, 2.0);
00368     <span class="comment">/* Show matrices  */</span>
00369     <span class="keywordflow">for</span> (i = 1; i &lt;= 3; i++)
00370       {
00371         puts(<span class="stringliteral">""</span>);
00372         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00373           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(A, i, j)); 
00374         printf(<span class="stringliteral">"\t"</span>);
00375         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00376           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(C, i, j));
00377       }
00378     printf(<span class="stringliteral">"\n\nGives\n\</span>
00379 <span class="stringliteral"> 0.04    0.04  0.04              3.00    3.00    3.00\n\</span>
00380 <span class="stringliteral"> 0.04    0.04  0.04              3.00    3.00    3.00\n\</span>
00381 <span class="stringliteral"> 0.04    0.04  0.04              3.00    3.00    3.00\n\n"</span>);
00382 
00383 
00384     <a class="code" href="mat__init_8c.html#a1">mat_init</a>(C, 0.0);
00385     a = <a class="code" href="mat__access_8c.html#a2">mat_values</a>(A);
00386     a[1][1] = 1.0; a[1][2] = 2.0; a[1][3] = 3.0;
00387     a[2][1] = 1.0; a[2][2] = 3.0; a[2][3] = 3.0;
00388     a[3][1] = 1.0; a[3][2] = 2.0; a[3][3] = 4.0;
00389     
00390     <span class="comment">/* see its inverse upwards  */</span>
00391     
00392     <a class="code" href="mat__ops_8c.html#a2">mat_invert</a>(B, A);  <span class="comment">/* OK */</span>
00393     <a class="code" href="mat__arith_8c.html#a2">mat_multiply</a>(C, A, B);
00394     
00395     <span class="keywordflow">for</span> (i = 1; i &lt;= 3; i++)
00396       {
00397         puts(<span class="stringliteral">""</span>);
00398         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00399           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(A, i, j)); 
00400         printf(<span class="stringliteral">"\t"</span>);
00401         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00402           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(B, i, j));
00403         printf(<span class="stringliteral">"\t"</span>);
00404         <span class="keywordflow">for</span> (j = 1; j &lt;= 3; j++)
00405           printf(<span class="stringliteral">"% 1.2f\t"</span>, <a class="code" href="mat__access_8c.html#a4">mat_element</a>(C, i, j));
00406       }
00407     printf(<span class="stringliteral">"\nMust give:\n\</span>
00408 <span class="stringliteral"> 1.00    2.00    3.00            6.00   -2.00   -3.00            1.00    0.00   0.00\n\</span>
00409 <span class="stringliteral"> 1.00    3.00    3.00           -1.00    1.00    0.00            0.00    1.00   0.00\n\</span>
00410 <span class="stringliteral"> 1.00    2.00    4.00           -1.00    0.00    1.00            0.00    0.00   1.00\n\n"</span>);
00411     
00412 }
</pre></div><hr><address style="align: right;"><small>Generated on Fri Mar 5 19:26:48 2004 for MATRIXCALCULUS by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.18 </small></address>
</body>
</html>
